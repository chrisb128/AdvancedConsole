/*
* This file was generated by the Gradle 'init' task.
*
* This is a general purpose Gradle build.
* Learn how to create Gradle builds at https://guides.gradle.org/creating-new-gradle-builds
*/


task deleteOutputFolders(type: Delete) {
  delete "client/web/build"
}

task clean(dependsOn: deleteOutputFolders) {
}

task buildWebClient(type: Exec, dependsOn: deleteOutputFolders) {
  String npm = 'npm';
  if (Os.isFamily(Os.FAMILY_WINDOWS)) {
      npm = 'npm.cmd'
  }
  commandLine npm, "run", "build"
}

task buildDockerImage(type: Exec, dependsOn: buildWebClient) {
  commandLine "docker", "build", ".", "-t", "advanced-console_client:latest"
}

task build {
  dependsOn buildDockerImage
}