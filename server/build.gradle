/*
* This file was generated by the Gradle 'init' task.
*
* This is a general purpose Gradle build.
* Learn how to create Gradle builds at https://guides.gradle.org/creating-new-gradle-builds
*/


task deleteOutputFolders(type: Delete) {
  delete "server/graphql/build"
}

task clean(dependsOn: deleteOutputFolders) {
}

task buildGraphQlServer(type: Exec, dependsOn: deleteOutputFolders) {
  String npm = 'npm';
  if (System.env['OS'].contains('Windows')) {
      npm = 'npm.cmd'
  }

  commandLine npm, "run", "build"
}

task buildDockerImage(type: Exec, dependsOn: buildGraphQlServer) {
  commandLine "docker", "build", ".", "-t", "advanced-console_api:latest"
}

task build {
  dependsOn buildDockerImage
}