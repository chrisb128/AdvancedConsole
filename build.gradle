/*
* This file was generated by the Gradle 'init' task.
*
* This is a general purpose Gradle build.
* Learn how to create Gradle builds at https://guides.gradle.org/creating-new-gradle-builds
*/
subprojects {
    version = '1.0'
}

dependencies {
}

task deleteOutputFolders(type: Delete) {
  delete "build"
}

task clean(type: Delete, dependsOn: deleteOutputFolders) {
}

task assembleServer(type: Copy) {
  dependsOn("clean")
  dependsOn("server:graphql:build")

  from "server/graphql/dist/server.js"
  from "server/graphql/config.sample.json"
  into "build/server"
}

task assembleWebClient(type: Copy) {
  dependsOn("clean")
  dependsOn("client:web:build")  

  from "client/web/build"
  into "build/client"
}

task build {
  dependsOn assembleServer
  dependsOn assembleWebClient
}
